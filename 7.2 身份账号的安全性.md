身份账号的安全性 { .text-center }
------------------

&nbsp;

### 设备账号的安全性

使用数字货币钱包账号的私钥很不方便，如果我们维持账号密码登录方式呢？输密码较短，记住倒是容易了，但拿密码代替私钥，或者说，用密码推导出私钥，破解很容易。假定采用 6 位可打印的 ascii 字母（约从 64 个字母中选择）当密码，暴力循环去猜，由密码推导账号，然后用账号公钥为结果判定的抓手。暴猜次数约 64 的 6 次方，用现代计算机几天就破解了，安全性没保障。

现在我们以够长私钥创建设备账号 `DEV-ACC` 账号，就不会像短密码那样容易被暴力破解了。然后依据 `DEV-ACC` 推导小号账号 `ALT-ACC`，推导完成后忘掉 `DEV-ACC`，设备账号不再在当前机器出现，所以，可以断绝敌手从源头私钥出发去破解，即，先破解 `DEV-ACC`，然后破解 `ALT-ACC`。

可见，`DEV-ACC` 账号是借助长私钥实现安全保护的 。

&nbsp;

### 密钥强化处理

接下来 `ALT-ACC` 账号需在加密后，将密文保存到 Server Worker 的数据库，用对称加解密算法，密码是简短字串，比方 8 位字母。为了抵抗暴力循环猜密码，我们对密码实施强化处理，如下图，本来要用 key1 进行加密或解码，现在给 key1 套一层强化推导算法，求得 key2，改用 key2 去做加解密。从 key1 推导 key2 须经历一段平稳的时间延迟，让每次猜测密码 key1，求导 key2 的过程都插入数秒确定性时延。

```
 +------+  enhancement   +------+
 | key1 | -------------> | key2 |
 +------+                +------+
```

这种强化推导算法要求单向确定性推导，而且不容易被专用芯片加速。散列摘要算法能实现单向确定性推导，但容易被专用硬件加速，加速过的算法性能与用常规桌面电脑去计算相比，至少有三个数量级的代差，所以不宜采纳。

我们的解决方案是：用 wasm 实现可验延时函数（Verifiable Delay Functions，VDF）做强化推导，嵌入到 javascript 网页环境可以运行。预设该算法的性能要求是：在低配环境下性能至少要超过最高配的千分之一，即，高配与低配之间的性能差距不能超过 1000 倍。最高配是指当下以任何硬件条件，包括用 GPU、ASIC 等专用芯片加速，编程也改用更高效的语言去实现。

如此，假定在低配机器中从 key1 推导出 key2 一次运算耗时 2 秒，改用高配机器稍大于 2 毫秒，想暴力破解 8 字母密码，就约需动用 1 万 7 千个最高性能的计算单元，耗时 1 年才行。
